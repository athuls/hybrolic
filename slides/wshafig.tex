\begin{figure}[t]

  \begin{center}
     \scalebox{0.9}{
    \begin{tikzpicture}
      \tikzstyle{every state}=[fill=gray!20!white,minimum size=2em,shape=rounded rectangle]
      

      \node[state,fill=gray!20] (m1) {$m_1$};
      \node[state,fill=gray!20] at (0, -2) (m2) {$m_2$};
      \draw [dashed] (-0.5, 0.5) rectangle (0.5, -2.5) node[right] {$o_1$};
      \node at (0, -2.8) {$0{<} x {<} 6$};
      \node at (0, -3.1) {$0 {<} y {<} 1$};
      
      
      \node[state, fill=gray!20] at (2.5,0) (m3) {$m_3$} ;
      \draw [dashed] (2, 0.5) rectangle (3, -0.5) node[right]{$o_2$} ;
      \node at (2.5, -0.8) {$2{<} x {<} 3$};
      \node at (2.5, -1.1) {$-3 {<} y {<} 3$};

      \node[state, fill=gray!20] at (5.5,0) (m4) {$m_4$} ;
      \draw [dashed] (5, 0.5) rectangle (6, -0.5) node[right]{$o_3$};
      \node at (5.5, -0.8) {$1{<} x {<} 7$};
      \node at(5.5, -1.1) {$-2 {<} y {<} {-}1$};

      \node[state, fill=gray!20] at (8,0) (m5) {$m_5$} ;
      \node[state, fill=gray!20] at (10,0) (m6) {$m_6$} ;
      \node[state, fill=gray!20] at (9,-2) (m7) {$m_7$} ;
      \draw [dashed] (7.5, 0.5) rectangle (10.5, -2.5) node[right]{$o_4$};
      \node at (9, -2.8) {$5 {<} x {<} 7, -3 {<} y {<} -1$};

     \path[->] (m1) edge[bend left] node [right] {$\top$}  (m2);
     \path[->] (m2) edge[bend left] node [left] {$\top$}  (m1);

     \path[->] (m1) edge node [above] {$2 {<} x {<} 3$}  (m3);
     \path[->] (m3) edge node [above] {$-2 {<} y {<} -1$}  (m4);

     \path[->] (m4) edge node [above] {$5 {<} x {<} 7$}  (m5);

    \path[->] (m5) edge node [above] {$\top$}  (m6);
    \path[->] (m6) edge node [right] {$\top$}  (m7);
    \path[->] (m7) edge node [left] {$\top$}  (m5);
    \end{tikzpicture}
    }
  \end{center}
\caption{Weak singular hybrid automaton for robotic motion planning example}
\label{fig:wsha}
\end{figure}

